---
layout: post
title: 'git: dicas'
date: 2017-10-01 13:32:22 -03:00
categories:
- Git
tags:
- git
- git-dicas
author-id: mhagnumdw
image: "assets/img/posts/git-dicas/git-goodness_v2.png"
feature-img: "assets/img/posts/git-dicas/git-goodness_v2.png"
thumbnail: "assets/img/posts/git-dicas/git-goodness_v2.png"
---

Dicas de git (snippets)

<!--more-->

### Criar uma branch vazia com nome "maven-repo"

{% highlight shell %}
git clone https://github.com/mhagnumdw/pippo.git
cd pippo/
git checkout --orphan maven-repo
git rm -rf .
git commit --allow-empty -m "Apagando todos os arquivos da branch para servir de repositório maven"
git push origin maven-repo
{% endhighlight %}

* * *

### Visualizar exclusivamente os commits feitos em uma branch em relação ao master

{% highlight shell %}
git branch
git checkout maven-repo
git cherry -v master
{% endhighlight %}

* * *

### Diferença de commits entre duas branches

```shell
git log --oneline origin/master..HEAD
# ou
diff -y <(git log --oneline -10) <(git log --oneline origin/master -10)
```

* * *

### Merge entre branches de repositórios diferentes

_Se você quiser fazer um merge de project-a para project-b:_

{% highlight shell %}
cd path/to/project-b
git remote add project-a path/to/project-a
git fetch project-a
git merge --allow-unrelated-histories project-a/master
git remote remove project-a
{% endhighlight %}

[https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories#answer-10548919](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories#answer-10548919)

* * *

### Listar os autores em um projeto

{% highlight shell %}
git shortlog --summary --numbered --email
{% endhighlight %}

* * *

### Adicionar ao stash sem remover do workspace

{% highlight shell %}
git stash push --include-untracked \
  --message 'Melhoria do autocomplete usando rxjs - v001' && \
  git stash apply
{% endhighlight %}

* * *

### Obter um arquivo específico de um stash

{% highlight shell %}
# listar stashs
git stash list
# listar os arquivos de um stash
git stash show stash@{0}
# ver o conteúdo do arquivo
git show stash@{0}:src/main/java/br/log/AlertsManager.java
# obter o arquivo para o workspace
git checkout stash@{0} -- src/main/java/br/log/AlertsManager.java
{% endhighlight %}

* * *

### Deletar branch local e remota

{% highlight shell %}
# deletar branch remota
git push --delete origin angular_gitlab_build_problem
# deletar branch local
git branch -d angular_gitlab_build_problem
{% endhighlight %}

* * *

### Buscar no conteúdo dos arquivos em todo o histórico

Buscar um texto em **todos os arquivos** em **todo o histórico**.

{% highlight shell %}
# achar o bloco de código sem se importar com o arquivo
git log --patch | grep -P -B 20 -A 3 '(addShutdownHook|threadToDeleteOnExit)'

# achar os commits que possuem os arquivos com o termo buscado
git log -SaddShutdownHook --name-status
git log -GaddShutdownHook --name-status
# após o S e G deve ser o termo buscado, que pode estar entre aspas simples
# a opção G aceita regex
{% endhighlight %}

* * *
